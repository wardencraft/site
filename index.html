<!--

-->

<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
</head>
<body>
    <main>
        <section class="container">
            <h1>NEXUS</h1>
        </section>
        <section class="container">
            <div id="engine-input">G</div>
            <input type="text" placeholder="Search the web..." id="input" autocomplete="off">
            <div id="select"><p id="selector"></p></div>
        </section>
        <section id="output">a</section>
    </main>
    <script>
        const input = document.getElementById("input");
        const selector = document.getElementById("selector");
        const select = document.getElementById("select");
        const output = document.getElementById("output");

        const shortcuts = {
            'ls': {
                action: () => {
                    showOutput();
                    let html = "Comandos Disponiveis:<br><br>";
                    for(let cmd in shortcuts) {
                        html += `${cmd} - ${shortcuts[cmd].description}<br>`
                    }
                    output.innerHTML = html;
                    input.value = '';
                },
                description: "Listar comandos",
            },
            'cls': {
                action: () => {
                    output.style.display = "none";
                    input.value = '';
                },
                description: "Limpar tela"
            },
            'sig': {
                action: () => {
                    window.location.href = "https://sig.ifc.edu.br/sigaa"
                },
                description: "SIGAA"
            },
            'chat': {
                action: () => {
                    window.location.href = "https://chatgpt.com"
                },
                description: "ChatGPT"
            },
            'y': {
                action: () => {
                    window.location.href = "https://youtube.com"
                },
                description: "Youtube"
            },
            'gdb': {
                action: () => {
                    window.location.href = "https://onlinegdb.com"
                },
                description: "OnlineGDB"
            },
            'git': {
                action: () => {
                    window.location.href = "https://github.com"
                },
                description: "GitHub"
            },
            'gmail': {
                action: () => {
                    window.location.href = "https://mail.google.com/"
                },
                description: "Google Gmail"
            },
            't': {
                action: () => {
                    window.location.href = "https://translate.google.com"
                },
                description: "Google Translate"
            }
        }

        function showOutput() {
            output.style.display = "block";
        }

        search_tool = (text, link) => {
            if(shortcuts[text]) {
                shortcuts[text].action();
            } else if(text.includes('https://') || text.includes('http://')) {
                window.location.href = text;
            } else if(text.includes('.') && !text.includes(' ')) {
                window.location.href = `https://${text}`
            } else {
                window.location.href = (`${link}${encodeURIComponent(text)}`);// <!--XD-->
            }
        }

        engine = (number) => {
            select.classList.remove('google', 'youtube', 'chat');
            if(number==1) {
                selector.innerHTML = "Google";
                link = 'https://www.google.com/search?q=';
                select.classList.add('google');
            } else if(number==2) {
                selector.innerHTML = "Youtube";
                link = 'https://www.youtube.com/results?search_query=';
                select.classList.add('youtube');
            } else if(number==3) {
                selector.innerHTML = "ChatGPT";
                link = 'https://chat.openai.com/?q='
                select.classList.add('chat');
            }
        }

        engine(1);

        selector.addEventListener("click", () => {
            showOutput()
        })

        input.focus();
        input.addEventListener("keydown", (e) => {
            if(e.key === 'Enter') {
                let text = input.value.toLowerCase();
                search_tool(text, link);
            }
        })
        window.addEventListener("keydown", (e) => {
            if(e.ctrlKey && e.key === ' '){
                e.preventDefault();
                input.focus();
            } else if(e.altKey && e.key === '1'){ //Google
                e.preventDefault();
                engine(1);
            } else if(e.altKey && e.key === '2'){ //Youtube
                e.preventDefault();
                engine(2);
            } else if(e.altKey && e.key === '3'){ //ChatGPT
                e.preventDefault();
                engine(3);
            }
        })

    </script>
</body>
</html>